apply plugin: 'java'

sourceCompatibility = 1.6
version = '1.0.0'

repositories {
    mavenCentral()
}

jar {
    manifest {
        attributes("Implementation-Title": "XmlValidate", "Implementation-Version": version)
    }	
}

task setup(dependsOn: jar) {
    doLast {
		def setFile = file(new File('bin/setenv.bat'))
		println "Create $setFile"		
		int count = 0
		String output
		// Iterate over the files in the collection
		runtimeClasspath.each{File file ->		
			// println file
			if (file.exists()) {
				if (count++ == 0) output = "set CP=" + file + "\n"
				else output += 'set CP=%CP%;' + file + "\n"
			}
		}
		if (output) {
			output += "set CLASSPATH=%CP%;build/libs/xmlValidate-${version}.jar\n"
			setFile.text = output
		}
    }
}

dependencies {	
 
 compile('org.jdom:jdom:1.1.3')
 compile('xerces:xercesImpl:2.9.1') 
 
 testCompile group: 'junit', name: 'junit', version: '4.4'
}
